<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    <div id="pagination"></div>
</body>
<script>
    let pagination = document.getElementById('pagination')
        , max_page = 5
        , current_page = 1
        , amount_page = 15
        ;
      function render_pagination() {
            let start_page = 1
                , end_page = max_page
                , middle = Math.ceil(max_page/2)
                , reaching_left = current_page <= middle
                , reaching_right = current_page >= amount_page - middle
                ;

                 //当可视页按钮在昨天
                 // 当前页 小于 可见页中间值 时，使 开始页 = 1;
                if(reaching_left){
                    start_page = 1;
                    end_page = max_page;
                }
                
                //当可视页按钮在右边
                //当前页 大于 总页数-可见页中间值 时，使 结束页值 = 总页数值;
                else if(reaching_right){
                    start_page = amount_page - max_page + 1;
                    end_page = amount_page ;
                }
                
                /*
                当前页在中间
                ...[...]...
                */
                /*加1或减1是为了排除中间按钮*/
                /*设按钮开始为当前页减去可视按钮最大值的一半*/
                else{
                    start_page = current_page - (middle - 1);
                     /*设按钮结束为当前页加上可视按钮最大值的一半*/
                    end_page = current_page + (middle - 1);
                }

            for (let i = start_page; i <= end_page; i++) {
      
                let btn = document.createElement('button');
                btn.innerHTML = i;
                btn.dataset.page = i;

                if (current_page == i){
                    btn.style.background = 'pink';
                }

                pagination.appendChild(btn);

                // 事件遍历
                // btn.addEventListener('click', function () {
                //     console.log(this);
                //     current_page = this.dataset.page;
                //     console.log(current_page);
                // });

                // 事件代理
                pagination.addEventListener('click', function (e) { 
                    if(e.target == btn){
                        console.log(btn);
                        console.log(btn.dataset.page)
                        current_page = btn.dataset.page;
                    }
                    else{
                        return;
                    }
                 });
            }
        }
        render_pagination();
</script>
</html>